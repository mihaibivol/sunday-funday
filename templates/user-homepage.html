{% extends "base.html" %}

{% block content %}
<script>
function postData(url, toggleValue, userId) {
  $.post(
      url,
      { toggle: toggleValue, user : userId, csrfmiddlewaretoken : '{{csrf_token}}'},
      function(data) {
      });
}
</script>
  {% for event in events %}
  <div class="inner cover">
    <h1 class="cover-heading"> <a href = "{% url 'event-detail' event.id %}"> {{ event.title }} </a> </h1>
    <input id="check_{{event.id}}" type="checkbox" {% if event.id in attended_events %} checked {% endif %}
            onClick="postData('{% url 'event-detail' event.id %}',
                             check_{{event.id}}.checked,
                             {{ request.user.id }})" />
    Attend event
    <input class="form-control" type="button" onClick=location.href="{% url 'edit-event' event.id %}" value="Edit"/>
    <p class="lead"> {{ event.description }} </p>
  </div>
  {% endfor %}
  <div class="CEVA CE-L PUNE IN STANGA SUS">
    <form method="GET" action="{% url 'user-homepage' %}">
      <label>Event name:</label>
      <input name="event_name" class="form-control" value="{{event_name_prefill}}" type="text"/>
      <select multiple="multiple" class="form-control" id="id_preference" name="preference">
        {% for preference in preferences %}
        <option value="{{ preference.name }}" {% if preference.name in selected_preferences %} selected {% endif %}>
          {{ preference.name }}
        </option>
        {% endfor %}
      </select>
      <input type="submit" class="form-control" value="Filter" />
    </form>
  </div>

{% endblock %}
